(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[15],{1006:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return w}));var a=n(16),r=n(2),i=n.n(r),o=n(945),c=n(1424),l=n(857),s=n(47),u=n(264),d=n.n(u),p=n(968),m=Object(l.a)((function(e){return{barBox:{padding:3,paddingTop:"10px",paddingBottom:"3px",borderRadius:"5px","&:hover":{background:"#f5f5f5",cursor:"pointer"},"&.selected":{background:"rgba(86,116,154,0.75)","& .txt, & .number":{color:"#fff"},"& .borderBox":{border:"1px solid white"},"& .percentBar":{background:"white"}}},borderBox:{position:"relative",height:"5px",borderRadius:"10px",border:"1px solid #acbbd1"},percentBar:{position:"absolute",height:"100%",background:"#acbbd1",borderRadius:"10px"},txt:{textTransform:"uppercase",fontSize:11,display:"flex",alignItems:"center"},number:{float:"right",border:"#fff",fontWeight:"bold",color:"#56749a",minWidth:"20px",height:"20px",lineHeight:"20px",textAlign:"center",fontSize:"10px",borderRadius:"10px",padding:"0px 10px"},icon:{width:"14px",height:"14px",marginRight:5,marginLeft:5,background:"#acbbd1",padding:"4px",borderRadius:"50%",borderTopRightRadius:0,borderTopLeftRadius:0,"& svg":{width:"100%",height:"14px"},"& path":{fill:"white"}}}})),b=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},f=function(e){var t=m();return i.a.createElement("div",null,e.data.map((function(n,a){var r;return i.a.createElement(i.a.Fragment,null,n.count>0&&i.a.createElement("div",{key:a,className:"".concat(t.barBox," ").concat((null===e||void 0===e||null===(r=e.selectedType)||void 0===r?void 0:r.slug)===n.slug?"selected":""),onClick:function(t){e.setType(n)}},i.a.createElement("div",{className:"borderBox ".concat(t.borderBox)},i.a.createElement("div",{style:{width:"".concat(n.percent,"%")},className:"percentBar ".concat(t.percentBar)})),i.a.createElement("div",null,i.a.createElement("div",{className:"".concat(t.txt," txt")},i.a.createElement("div",{className:t.icon},s.d.find((function(e){return e.value===n.icon})).icon),n.name,i.a.createElement("span",{className:"number ".concat(t.number)},b(n.count))))))})))},h=function(e){var t,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){!function(){var t=e.data.map((function(e){return{type:e._id?e._id:"Sin procesar",value:e.count,color:e.color}})),a=p.f(n.current);a.attr("viewBox","0 0 200 200");var r=p.a().innerRadius(70).outerRadius(85),i=p.b().value((function(e){return e.value})),o=(p.a().innerRadius(95).outerRadius(95),i(t));a.append("g").attr("class","donut-container").attr("transform","translate(".concat(100,", ").concat(100,")")).selectAll("path").data(o).join("path").style("stroke","white").style("stroke-width",2).style("fill",(function(e){return e.data.color})).attr("d",r)}()}),[]),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",position:"relative"}},i.a.createElement("svg",{style:{maxWidth:130},ref:n,className:e.className}),i.a.createElement("div",null,null===(t=e.data)||void 0===t?void 0:t.map((function(e,t){return i.a.createElement("div",{style:{textTransform:"uppercase",fontSize:"10px",fontWeight:"bold"},key:t},e._id?s.a.find((function(t){return t.value===e._id})).label:"Sin procesar",i.a.createElement("div",{style:{background:e.color,textAlign:"center",fontWeight:"bold",color:"white",maxWidth:60,borderRadius:3}},b(e.count)))}))))},g=Object(l.a)((function(e){return{container:{display:"flex",flexDirection:"column",width:"90%",overflowY:"auto",marginLeft:"5%",marginTop:"20px",backgroundColor:"#fff",borderRadius:"5px",boxShadow:"inset 0 0 5px rgba(0,0,0,.1)"},item:{padding:"10px",borderBottom:"1px solid #f2f8ff",overflow:"hidden",color:"#777",paddingTop:25,fontSize:14,position:"relative"},itemName:Object(a.a)({fontWeight:"bold",color:"#333",marginBottom:5,position:"absolute",top:15,transform:"translateY(-50%)",textTransform:"uppercase",fontSize:12},"color","#56749a"),chip:{margin:2,padding:2,"& .MuiChip-avatar":{width:"20px !important",height:"20px !important",marginLeft:"13px !important"}}}})),v=function(e){var t=g();return i.a.createElement(o.a,{className:t.item,style:e.style?e.style:{}},i.a.createElement("div",{className:t.itemName},e.title),e.item?e.item:e.children)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,a=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(a))+" "+r[i]},x=function(e){var t,n,a=g();return Object(r.useEffect)((function(){0===e.record.parent.length?e.setMetadata(null):e.metadata&&e.setMetadata(e.record.parent[0])}),[e.record]),i.a.createElement(o.a,{className:a.container},i.a.createElement(v,{title:"Nombre del archivo",item:(null===e||void 0===e||null===(t=e.record)||void 0===t?void 0:t.displayName)?null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.displayName:e.record.name}),i.a.createElement(v,{title:"HASH",item:e.record.hash}),i.a.createElement(v,{title:"Tama\xf1o",item:y(e.record.size)}),e.record.parent.length>0&&i.a.createElement(v,{title:"Contenido relacionado"},e.record.parent.map((function(t,n){return i.a.createElement(c.a,{avatar:s.d.filter((function(e){return e.value===t.icon}))?s.d.filter((function(e){return e.value===t.icon}))[0].iconlight:i.a.createElement(d.a,null),key:n,label:t.name,className:a.chip,onClick:function(){e.setMetadata(t)}})}))))},w=function(e){var t=g();return i.a.createElement(o.a,{className:t.container},i.a.createElement(v,{title:"Descripci\xf3n",item:e.type.description}),i.a.createElement(v,{title:"Balance general del contenido",item:i.a.createElement(f,{selectedType:e.selectedType,setType:e.setType,data:e.parents})}),e.files.total>0&&i.a.createElement(v,{title:"Balance general de los documentos",item:i.a.createElement(h,{data:e.files.data})}))}},1013:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var a=n(47),r=n(204);function i(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/snaps",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function o(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/users/snaps",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function c(e){var t="/snaps/"+e,n={method:"DELETE",headers:new Headers({Authorization:Object(r.a)()}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 204!==e.status?Promise.reject(e):e}))}function l(e){var t="/snaps/"+e,n={method:"GET",headers:new Headers({Authorization:Object(r.a)()}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.blob()}))}},1145:function(e,t,n){"use strict";n.r(t),n.d(t,"useStyles",(function(){return Je})),n.d(t,"BloqueContenido",(function(){return Ge})),n.d(t,"Main",(function(){return Ye}));var a=n(37),r=n(2),i=n.n(r),o=n(51),c=n(119),l=n(952),s=n(953),u=n(857),d=n(941),p=n(959),m=n(1433),b=n(1435),f=n(966),h=n.n(f),g=n(983),v=n(956),y=n.n(v),x=n(1142),w=n.n(x),E=n(1006),k=n(1033),j=n.n(k),O=n(958),S=n.n(O),C=n(964),T=n.n(C),B=n(138),R=n.n(B),A=n(866),z=n(1436),L=n(945),N=n(1423),V=n(1034),P=n.n(V),M=n(1035),_=n.n(M),I=n(977),F=n(976),H=n(978),q=(n(203),n(1137)),W=n(1017),D=n(968),U=Object(A.a)((function(e){return{segment:{transition:"all .35s",cursor:"pointer","&:hover":{background:"rgba(86,116,154,0.25)"},"&.selected":{opacity:1,background:"#56749a",color:"white"}},speaker:{fontWeight:"bold",marginRight:"10px"},paragraph:{fontSize:"16px",maxWidth:"650px",margin:"0 auto",marginBottom:"20px"},selected:{background:"#56749a",color:"white",borderRadius:"3px"}}})),J=function(e){return i.a.createElement(L.a,{style:{padding:"5px",background:"white"}},e.speakers.map((function(t,n){return i.a.createElement(L.a,{key:n,style:{padding:"10px",border:"1px solid #dcdcdc",marginBottom:"5px",borderRadius:"5px",display:"flex",maxWidth:"450px",background:"white",alignItems:"center"}},i.a.createElement("div",{style:{width:"150px",textAlign:"center",fontWeight:"bold",color:t.color}},t.name.replace("SPEAKER","Persona")),i.a.createElement("div",{style:{position:"relative",width:"350px",marginLeft:"10px",background:"#f2f2f2",borderRadius:"3px",height:"10px"}},t.segments.map((function(n,a){return i.a.createElement("div",{style:{position:"absolute",top:"0",height:"100%",left:"".concat(n.start/e.totalTime*100,"%"),width:"".concat((n.end-n.start)/e.totalTime*100,"%"),background:t.color,cursor:"pointer"},onClick:function(t){e.setVideoTime(n.start)}})}))),i.a.createElement("div",{style:{marginLeft:"10px",background:t.color,color:"white",padding:"5px",fontSize:"10px",borderRadius:"5px"}},e.totalTime&&i.a.createElement(i.a.Fragment,null,Math.round(t.total/e.totalTime*100),"%")))})))},G=function(e){var t=U(),n=Object(r.useState)(null),o=Object(a.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)(1),u=Object(a.a)(s,2),d=u[0],m=(u[1],Object(r.useState)(null)),b=Object(a.a)(m,2),f=b[0],h=b[1],g=function(){p.i(e.id,e.slug).then((function(e){D.e;e.speakers&&Object(q.a)("hasSpeakers"),l(e.segments)}))};Object(r.useEffect)((function(){g()}),[]),Object(r.useEffect)((function(){e.updateTranscription&&(g(),e.setUpdateTranscription(!1))}),[e.updateTranscription]),Object(r.useEffect)((function(){if(c){c.forEach((function(n,a){if(n.index=a,n.start<=e.time&&n.end>=e.time&&f!==a){h(a),e.setCurrentLabel(n);var r=document.querySelector(".seg_".concat(a));r&&(document.querySelectorAll(".".concat(t.segment)).forEach((function(e){e.classList.remove("selected")})),r.classList.add("selected"),r&&r.scrollIntoView({behavior:"smooth",block:"center"}))}}))}}),[e.time]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(L.a,{style:{position:"absolute",top:0,width:"100%",height:"100%"}},1===d&&c&&i.a.createElement(W.BloqueContenido,{style:{height:"calc(100% - 20px)",margin:"10px",borderRadius:"5px",width:"calc(100% - 20px)"}},i.a.createElement("div",{style:{float:"right",paddingTop:80}},function(){var n=null,a=[],r=[];return c.map((function(o,c){var l=i.a.createElement("span",{key:c,onClick:function(t){return e.setVideoTime(o.start)},className:"".concat(t.segment," seg_").concat(c)},o.text);l={container:l,speaker:o.speaker,color:o.color},o.speaker!==n&&(n=o.speaker,r.push(a),a=[]),a.push(l)})),r.push(a),i.a.createElement(i.a.Fragment,null,r.map((function(e,n){return i.a.createElement("p",{key:n,className:t.paragraph},e.map((function(e,n){return n>0?e.container:e.speaker?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{style:{color:e.color},className:t.speaker},e.speaker.replace("SPEAKER","Persona")),e.container):void 0})))})))}()))))},Y=n(18),Z=n(1424),$=n(954),X=n(971),K=n(1138),Q=n.n(K),ee=n(1389),te=n(984),ne=Object(u.a)((function(e){return{close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}}}})),ae=function(e){var t=Object(l.b)(),n=ne(),o=Object(r.useState)(""),c=Object(a.a)(o,2),s=c[0],u=c[1],d=Object(r.useState)(""),m=Object(a.a)(d,2),b=m[0],f=m[1];Object(r.useEffect)((function(){console.log(e.currentLabel),e.currentLabel&&(u(e.currentLabel.text),f(e.currentLabel.speaker))}),[e.currentLabel]);return i.a.createElement(L.a,{style:{backgroundColor:"white"}},i.a.createElement(L.a,{style:{display:"flex",justifyContent:"center"}},i.a.createElement(X.a,{className:"".concat(t.item," light"),title:"Editar texto",labelPos:"top",onClick:function(){}},i.a.createElement(Q.a,null))),e.currentLabel&&i.a.createElement(L.a,null,i.a.createElement($.o,{value:s,handleChange:function(e){return u(e.target.value)},style:{padding:"5px",width:"350px"}}),b&&i.a.createElement($.o,{value:b,handleChange:function(e){return f(e.target.value)},style:{padding:"5px",width:"350px"}}),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement(Z.a,{label:"Guardar",size:"small",onClick:function(){!function(){var t=Object(Y.a)({},e.currentLabel);t.text=s,t.speaker=b,t.slug=e.slug,p.l(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:i.a.createElement(ee.a,null),style:{margin:3,border:"none"},variant:"outlined",className:n.close}),i.a.createElement(Z.a,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={slug:e.slug,index:e.currentLabel.index};p.b(e.id,t).then((function(t){e.setUpdateTranscription(!0)})).catch((function(e){console.log(e)}))}()},icon:i.a.createElement(te.a,null),style:{margin:3,border:"none"},variant:"outlined",className:n.close}))))},re=n(345),ie=n.n(re),oe=n(346),ce=Object(A.a)((function(e){return{bloqueReproduccion:{width:"calc(100% - 40px)",margin:"20px",display:"flex",alignItems:"center",position:"absolute",zIndex:1,"&:hover .num_currentTime":{opacity:1}},playPauseBtn:{width:"70px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:"#56749a"}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"#ececec",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:"#56749a",borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"-20px",right:"-56px",fontSize:"12px",fontWeight:"bold",color:"#56749a",opacity:0,transition:"all .3s"},duration:{width:"100px",height:"70px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"#555",fontSize:"12px",fontWeight:"bold"}}})),le=function(e){var t,n,o,c,l,s,u=ce(),d=Object(r.useRef)(null),m=Object(r.useState)(!1),b=Object(a.a)(m,2),f=b[0],h=b[1],g=Object(r.useState)(0),v=Object(a.a)(g,2),y=v[0],x=v[1],w=Object(r.useState)(null),E=Object(a.a)(w,2),k=E[0],j=E[1],O=Object(r.useState)(null),S=Object(a.a)(O,2),C=S[0],T=S[1],B=Object(r.useState)(!1),A=Object(a.a)(B,2),V=A[0],M=A[1],q=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},W=function(){h(!1)},D=function(){R.a.fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},U=function(){var e=d.current.duration;x(q(e))},G=function(){e.setPlayTime(d.current.currentTime);var t=d.current.currentTime/d.current.duration*100,n=document.querySelector(".".concat(u.progress)),a=document.querySelector(".".concat(u.currentTime));n.style.width="".concat(t,"%"),a.innerHTML=q(d.current.currentTime)};Object(r.useEffect)((function(){return p.h(e.id).then((function(e){var t=URL.createObjectURL(e);d.current.src=t,d.current.addEventListener("ended",W),d.current.addEventListener("error",D),d.current.addEventListener("loadedmetadata",U),d.current.addEventListener("timeupdate",G)})).catch((function(e){R.a.fire({title:"Error",text:"No se pudo cargar el archivo: "+e.message,icon:"error",confirmButtonText:"Ok"})})),function(){d.current.removeEventListener("ended",W),d.current.removeEventListener("error",D),d.current.removeEventListener("loadedmetadata",U),d.current.removeEventListener("timeupdate",G)}}),[]),Object(r.useEffect)((function(){e.time&&(d.current.currentTime=e.time)}),[e.time]);var Y=function(e){d.current.currentTime=e};return i.a.createElement(F.a,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")}},i.a.createElement(z.a,{className:u.bloqueReproduccion,style:{display:(null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.duration)?"flex":"none"}},i.a.createElement(L.a,{onClick:function(){d.current.paused?(d.current.play(),h(!0)):(d.current.pause(),h(!1))},className:u.playPauseBtn},f?i.a.createElement(_.a,null):i.a.createElement(P.a,null)),i.a.createElement(L.a,{className:u.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(u.progressContainer)),n=e.nativeEvent.offsetX/t.offsetWidth*100;d.current.currentTime=d.current.duration*n/100}},i.a.createElement(L.a,{className:u.progress},i.a.createElement(L.a,{className:"".concat(u.currentTime," num_currentTime")}))),i.a.createElement(L.a,{className:u.duration},y)),i.a.Children.map(e.children,(function(e){return i.a.isValidElement(e)?i.a.cloneElement(e,{setVideoTime:Y,textAlign:"center",totalTime:d.current.duration,setSpeakers:j,setCurrentLabel:T,updateTranscription:V,setUpdateTranscription:M}):e})),i.a.createElement(I.a,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"}},i.a.createElement(H.a,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})),i.a.createElement(I.a,{id:"speakers",initialPosition:{x:0,y:0},style:{display:(null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.duration)&&k?"block":"none"}},(null===d||void 0===d||null===(o=d.current)||void 0===o?void 0:o.duration)&&k&&i.a.createElement(J,{speakers:k,totalTime:d.current.duration,setVideoTime:Y})),i.a.createElement(I.a,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:(null===d||void 0===d||null===(c=d.current)||void 0===c?void 0:c.duration)&&"edit_av_transcribe"===e.subView?"block":"none"}},(null===d||void 0===d||null===(l=d.current)||void 0===l?void 0:l.duration)&&"edit_av_transcribe"===e.subView&&i.a.createElement(ae,{setSubView:e.setSubView,currentLabel:C,id:e.id,slug:e.slug,setUpdateTranscription:M})),i.a.createElement("audio",{ref:d},i.a.createElement("source",{src:"",type:"audio/mpeg"}),i.a.createElement("source",{src:"",type:"audio/ogg"})),!(null===d||void 0===d||null===(s=d.current)||void 0===s?void 0:s.duration)&&i.a.createElement(N.a,{style:{position:"absolute",top:20,left:20}},i.a.createElement(ie.a,{options:{loop:!0,autoplay:!0,animationData:oe,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:70,width:70})))},se=Object(A.a)((function(e){return{bloqueReproduccion:{width:"calc(100% - 20px)",margin:"10px",display:"flex",alignItems:"center",position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, .5)",backdropFilter:"blur(5px) saturate(10%) brightness(40%)",transition:"all .3s !important",overflow:"visible",opacity:1,"&:hover .num_currentTime":{opacity:1},"&.hide":{opacity:0}},playPauseBtn:{width:"50px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","& svg":{width:"50%",height:"50%","& path":{fill:"#fff"}}},progressContainer:{width:"calc(100% - 140px)",height:"5px",backgroundColor:"rgba(255,255,255,.1)",display:"flex",alignItems:"center",borderRadius:"5px",cursor:"pointer"},progress:{width:"0%",height:"100%",backgroundColor:"#fff",borderRadius:"5px",position:"relative",transition:"all .3s"},currentTime:{position:"absolute",top:"0px",right:"-56px",fontSize:"12px",transform:"translateY(-170%)",fontWeight:"bold",color:"#fff",opacity:0,transition:"all .3s",textShadow:"0 0 5px rgba(0,0,0,0.6)"},duration:{width:"150px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"rgba(255,255,255,1)",fontSize:"12px",fontWeight:"bold"},hide:{visibility:"hidden"}}})),ue=function(e){var t,n,o,c,l=se(),s=Object(r.useRef)(null),u=Object(r.useState)(!1),d=Object(a.a)(u,2),m=d[0],b=d[1],f=Object(r.useState)(0),h=Object(a.a)(f,2),g=h[0],v=h[1],y=Object(r.useState)(null),x=Object(a.a)(y,2),w=x[0],E=x[1],k=Object(r.useState)(!1),j=Object(a.a)(k,2),O=j[0],S=j[1],C=Object(r.useState)(null),T=Object(a.a)(C,2),B=T[0],A=T[1],V=Object(r.useState)(!1),M=Object(a.a)(V,2),q=M[0],W=M[1],D=null,U=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},G=function(){b(!1)},Y=function(){R.a.fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})},Z=function(){var e=s.current.duration;v(U(e))},$=function(){e.setPlayTime(s.current.currentTime);var t=s.current.currentTime/s.current.duration*100,n=document.querySelector(".".concat(l.progress)),a=document.querySelector(".".concat(l.currentTime));n.style.width="".concat(t,"%"),a.innerHTML=U(s.current.currentTime)},X=function(){clearTimeout(D);var e=document.querySelector(".".concat(l.bloqueReproduccion));e.classList.remove("hide"),D=setTimeout((function(){e.classList.add("hide")}),4e3)},K=function(){S(!0)},Q=function(){s.current.paused?(s.current.play(),b(!0)):(s.current.pause(),b(!1))};Object(r.useEffect)((function(){return p.h(e.id).then((function(e){var t=URL.createObjectURL(e);s.current.src=t,s.current.addEventListener("ended",G),s.current.addEventListener("error",Y),s.current.addEventListener("loadedmetadata",Z),s.current.addEventListener("canplay",K),s.current.addEventListener("timeupdate",$),s.current.addEventListener("mousemove",X),s.current.addEventListener("click",Q)})).catch((function(e){console.log(e),R.a.fire({title:"Error",text:"No se pudo cargar el archivo",icon:"error",confirmButtonText:"Ok"})})),function(){s.current.removeEventListener("ended",G),s.current.removeEventListener("error",Y),s.current.removeEventListener("loadedmetadata",Z),s.current.removeEventListener("timeupdate",$),s.current.removeEventListener("mousemove",X),s.current.removeEventListener("click",Q)}}),[]);var ee=function(e){s.current.currentTime=e};return i.a.createElement(F.a,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")}},i.a.createElement(I.a,{id:"videoPlayer",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"absolute",zIndex:1,backgroundColor:"#000",visibility:O?"visible":"hidden"},initialPosition:{x:0,y:0}},i.a.createElement("div",null,i.a.createElement("video",{style:{width:550,height:"auto",maxWidth:"100%",marginBottom:-7,cursor:"move"},ref:s}),i.a.createElement(z.a,{className:l.bloqueReproduccion,style:{backgroundColor:"rgba(255, 255, 255, .25)"},sx:{overflow:"visible"},onMouseMove:function(){clearTimeout(D)}},i.a.createElement(L.a,{onClick:Q,className:l.playPauseBtn},m?i.a.createElement(_.a,null):i.a.createElement(P.a,null)),i.a.createElement(L.a,{className:l.progressContainer,onClick:function(e){var t=document.querySelector(".".concat(l.progressContainer)),n=e.nativeEvent.offsetX/t.offsetWidth*100;s.current.currentTime=s.current.duration*n/100}},i.a.createElement(L.a,{className:l.progress},i.a.createElement(L.a,{className:"".concat(l.currentTime," num_currentTime")}))),i.a.createElement(L.a,{className:l.duration},g)))),i.a.Children.map(e.children,(function(e){return i.a.isValidElement(e)?i.a.cloneElement(e,{setVideoTime:ee,totalTime:s.current.duration,setSpeakers:E,setCurrentLabel:A,updateTranscription:q,setUpdateTranscription:W}):e})),i.a.createElement(I.a,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"}},i.a.createElement(H.a,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})),i.a.createElement(I.a,{id:"speakers",initialPosition:{x:0,y:0},style:{display:(null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.duration)&&w?"block":"none"}},(null===s||void 0===s||null===(n=s.current)||void 0===n?void 0:n.duration)&&w&&i.a.createElement(J,{speakers:w,totalTime:s.current.duration,setVideoTime:ee})),i.a.createElement(I.a,{id:"edit_av_transcribe",initialPosition:{x:0,y:0},style:{display:(null===s||void 0===s||null===(o=s.current)||void 0===o?void 0:o.duration)&&"edit_av_transcribe"===e.subView?"block":"none"}},(null===s||void 0===s||null===(c=s.current)||void 0===c?void 0:c.duration)&&"edit_av_transcribe"===e.subView&&i.a.createElement(ae,{setSubView:e.setSubView,currentLabel:B,id:e.id,slug:e.slug,setUpdateTranscription:W})),!O&&i.a.createElement(N.a,{style:{position:"absolute",top:20,left:20}},i.a.createElement(ie.a,{options:{loop:!0,autoplay:!0,animationData:oe,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:100,width:100})))},de=n(955),pe=n(1013),me=n(1422),be=n(1414),fe=n(985),he=n(1014),ge=n.n(he),ve=n(1015),ye=n.n(ve),xe=n(1027),we=n.n(xe),Ee=n(339),ke=n(1413),je=n(1437),Oe=n(1421),Se=Object(A.a)((function(e){return{segment:{fontSize:"20px",opacity:.25,transition:"all .5s",textAlign:"center",cursor:"pointer","&:hover":{opacity:.55},"&.selected":{opacity:1}},paragraph:{fontSize:"15px",maxWidth:"750px",margin:"0 auto",marginBottom:"20px"}}})),Ce=function(e){Se();var t=Object(r.useState)(0),n=Object(a.a)(t,2),o=n[0],c=n[1],l=Object(r.useState)(null),s=Object(a.a)(l,2),u=s[0],d=s[1],p=Object(r.useState)(null),m=Object(a.a)(p,2),b=m[0],f=m[1];Object(r.useEffect)((function(){e.view&&(e.setSubView(""),de.i(e.view.slug,"detail").then((function(e){e.forEach((function(e){"multicheckbox"===e.type&&h(e.id,e.default)})),d(e)})).catch((function(e){})))}),[]);var h=function(e,t){var n=Object(Y.a)({},b);n[e]=t,f(n)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(L.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",margin:0}},i.a.createElement(ke.a,{value:o,onChange:function(t,n){c(n),e.setSelectedBlock(null),0===n?e.setSubView(""):1===n?e.setSubView("blocks"):2===n&&e.setSubView("words")},indicatorColor:"primary",textColor:"primary",centered:!0},i.a.createElement(je.a,{label:"Documento",id:0}),i.a.createElement(je.a,{label:"Bloques",id:1}),i.a.createElement(je.a,{label:"Palabras",id:2}))),u&&i.a.createElement(L.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",marginTop:"20px",backgroundColor:"#fff",borderRadius:"25px",boxShadow:"0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)"}},u.map((function(t,n){return i.a.createElement(i.a.Fragment,null,"multicheckbox"===t.type&&i.a.createElement($.f,{options:t.options.map((function(e){return{id:e.value,term:e.label}})),value:b[t.id],handleChange:function(e){h(t.id,e)}}),"button"===t.type&&i.a.createElement(Oe.a,{variant:"contained",onClick:function(){var n;e.view.slug,n=t.callback,de.p(e.view.slug,JSON.stringify(Object(Y.a)(Object(Y.a)({},b),{},{id:e.id})),n).then((function(e){R.a.fire({title:"\xc9xito",text:"Se ha ejecutado la acci\xf3n correctamente",icon:"success",confirmButtonText:"Ok"})}))},sx:{margin:"10px"}},t.label))}))))},Te=n(1002),Be=n(1037),Re=n.n(Be),Ae=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useRef)(),c=!1,l=Object(r.useState)(0),s=Object(a.a)(l,2),u=s[0],d=s[1],m=D.c(D.d);Object(r.useEffect)((function(){var t=setTimeout((function(){var t=document.getElementById("page-".concat(e.page-1));t&&t.scrollIntoView({duration:0})}),200),a=null;n.current=new IntersectionObserver((function(t){return t.forEach((function(t,n){t.isIntersecting&&(a&&clearTimeout(a),a=setTimeout((function(){e.setPage(parseInt(t.target.dataset.index)+1),p.g(e.id,[parseInt(t.target.dataset.index)],"big").then((function(e){var n="data:image/jpg;base64,"+e[0].data;t.target.style.backgroundImage="url(".concat(n,")")}))}),300))}))}),{threshold:.25});var r=n.current;return function(){r.disconnect(),clearTimeout(t)}}),[]),Object(r.useEffect)((function(){var e=n.current;return e.disconnect(),document.querySelectorAll(".page").forEach((function(t){return e.observe(t)})),function(){return e.disconnect()}}),[e.pages]),Object(r.useEffect)((function(){if(!c){var t=Math.abs(e.page-u),n=document.getElementById("page-".concat(e.page-1));n&&n.scrollIntoView({behavior:"smooth",duration:5*t}),d(e.page)}}),[e.page]);var b=null,f=function(e){c=!0,b&&clearTimeout(b),b=setTimeout((function(){c=!1}),2e3)},h=function(e){return Array.isArray(e.label)?e.label.length>0?"O"===e.label[0]?"transparent":m(e.label[0]):void 0:e.type?m(e.type):"transparent"};return Object(r.useEffect)((function(){return t.current&&t.current.addEventListener("wheel",f),function(){t.current&&t.current.removeEventListener("wheel",f)}}),[t]),Object(r.useEffect)((function(){o.current&&Re()(o.current).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move:function(n){var a=n.target.width.animVal.value,r=n.target.height.animVal.value,i=t.current.getBoundingClientRect().width,o=r/100*i,c=a/100*i+n.delta.x,l=o+n.delta.y;c=c/i*100,l=l/i*100,n.target.setAttribute("width","".concat(c)),n.target.setAttribute("height","".concat(l));var s={x:parseFloat(n.target.getAttribute("x"))/100,y:parseFloat(n.target.getAttribute("y"))/100*e.aspectRatio,width:c/100,height:l/100*e.aspectRatio},u=Object(Y.a)({},e.selectedBlock);u.bbox=s,e.setSelectedBlock(u)}}}).draggable({listeners:{move:function(n){var a=parseFloat(n.target.getAttribute("x")),r=parseFloat(n.target.getAttribute("y")),i=parseFloat(n.target.getAttribute("width")),o=parseFloat(n.target.getAttribute("height")),c=t.current.getBoundingClientRect().width,l=r/100*c;a=(a=a/100*c+n.delta.x)/c*100,r=(r=l+n.delta.y)/c*100,n.target.setAttribute("x",a),n.target.setAttribute("y",r);var s={x:a/100,y:r/100*e.aspectRatio,width:i/100,height:o/100*e.aspectRatio},u=Object(Y.a)({},e.selectedBlock);u.bbox=s,e.setSelectedBlock(u)}}})}),[o,e.selectedBlock]),i.a.createElement("div",{ref:t,style:{height:"100%",width:"100%",justifyContent:"center",overflowY:"auto",position:"absolute",top:0,left:0}},Array.from({length:e.pages},(function(t,n){return i.a.createElement("div",{id:"page-".concat(n),className:"page",key:n,"data-index":n,style:{background:"white",marginBottom:30,backgroundSize:"contain"}},i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 ".concat(100/e.aspectRatio),preserveAspectRatio:"none"},e.selectedBlock&&e.selectedBlock.new&&e.page-1===n&&i.a.createElement("rect",{x:100*e.selectedBlock.bbox.x,y:100*e.selectedBlock.bbox.y/e.aspectRatio,width:100*e.selectedBlock.bbox.width,height:100*e.selectedBlock.bbox.height/e.aspectRatio,fill:h(e.selectedBlock,o.current),fillOpacity:.3,ref:o})))})))},ze=n(1032),Le=n.n(ze),Ne=Object(u.a)((function(e){return{scrollbar:{"&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},close:{width:24,height:24,"& .MuiChip-label":{display:"none"},"& svg":{margin:"0 !important"}}}})),Ve=Object(Ee.a)(me.a)((function(e){var t=e.theme;return{width:62,height:26,padding:8,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(30px)","& .MuiSwitch-thumb:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path fill="white" d="M2 7h4v10H2V7zm5 12h10V5H7v14zM18 7h4v10h-4V7z"></path></svg>\')'},"& + .MuiSwitch-track":{opacity:1,backgroundColor:(t.palette.mode,"#fcfcfc")}}},"& .MuiSwitch-thumb":{backgroundColor:(t.palette.mode,"#acbcd1"),width:23,height:23,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path fill="white" d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z"></path></svg>\')',backgroundSize:"60%"}},"& .MuiSwitch-track":{opacity:1,backgroundColor:(t.palette.mode,"#fcfcfc"),borderRadius:10,border:"1px solid #dcdcdc",height:10}}})),Pe=function(e){var t=Ne(),n=Object(r.useState)({}),o=Object(a.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)({}),u=Object(a.a)(s,2),d=u[0],m=u[1];Object(r.useEffect)((function(){c[e.subView]||e.slug&&e.subView&&de.i(e.slug,e.subView).then((function(t){var n=Object(Y.a)({},c);n[e.subView]?n[e.subView]=n[e.subView].concat(t):n[e.subView]=t;var a=Object(Y.a)({},d);t.forEach((function(t){a[t.id]=e.block[t.id]})),m(a),l(n)})).catch((function(e){}))}),[e.subView]);var b=function(t,n){var a=Object(Y.a)({},d);a[n.id]=t.target.value,m(a);var r=Object(Y.a)({},e.block);r[n.id]=t.target.value,e.setSelectedBlock(r)};return i.a.createElement("div",{style:{background:"white"}},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px"}},i.a.createElement("div",null,i.a.createElement(Z.a,{label:"Guardar",size:"small",onClick:function(){!function(){var t={data:d,id_doc:e.recordId,type_block:e.subView,index:e.block.index,page:e.page,slug:e.slug,bbox:e.block.bbox};e.slug&&e.subView?e.block.new?p.j(t).then((function(t){e.setSelectedBlock(null)})):p.k(t).then((function(t){e.setSelectedBlock(null)})):e.block.new&&pe.a({type:"document",record_id:e.recordId,data:{bbox:e.block.bbox,page:e.page}}).then((function(t){e.setSelectedBlock(null),R.a.fire({title:"Guardado",text:"Recorte guardado",icon:"success",confirmButtonText:"Ok"})}))}()},icon:i.a.createElement(ee.a,null),style:{margin:3,border:"none"},variant:"outlined",className:t.close}),!e.block.new&&i.a.createElement(Z.a,{label:"Eliminar",size:"small",onClick:function(){!function(){var t={id_doc:e.recordId,type_block:e.subView,index:e.block.index,page:e.page,slug:e.slug};p.a(t).then((function(t){console.log(t),e.setSelectedBlock(null)}))}()},icon:i.a.createElement(te.a,null),style:{margin:3,border:"none"},variant:"outlined",className:t.close})),i.a.createElement(Z.a,{label:"Cerrar",size:"small",onClick:function(){e.setSelectedBlock(null)},variant:"outlined",icon:i.a.createElement(we.a,null),style:{margin:3,width:24,height:24,border:"none"},className:t.close})),c[e.subView]&&c[e.subView].map((function(t,n){return i.a.createElement("div",{key:n},"text"===t.type&&i.a.createElement($.o,{name:t.id,value:d[t.id],handleChange:function(e){return b(e,t)},style:{width:"100%",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"}}),"text-area"===t.type&&i.a.createElement($.n,{name:t.id,value:d[t.id],handleChange:function(e){return b(e,t)},style:{width:"350px",height:"400px",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"},rootStyle:{width:"100%",margin:"0px",padding:"5px"}}),"select"===t.type&&i.a.createElement($.l,{name:t.id,value:d[t.id],options:e.labels.map((function(e){return{value:e,label:e}})),handleChange:function(e){return b(e,t)},style:{width:"100%",padding:"0px",marginRight:"5px",backgroundColor:"white",borderBottom:"none"},rootStyle:{width:"100%",margin:"0px",padding:"5px"}}))})))},Me=function(e){var t,n,o,c=Object(r.useState)(0),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(0),f=Object(a.a)(d,2),h=f[0],g=f[1],v=Object(r.useState)(1),y=Object(a.a)(v,2),x=y[0],w=y[1],E=Object(r.useState)([]),k=Object(a.a)(E,2),j=k[0],O=k[1],S=Object(r.useState)([]),C=Object(a.a)(S,2),T=C[0],B=C[1],R=Object(r.useState)(null),A=Object(a.a)(R,2),z=A[0],N=A[1],V=Object(r.useRef)(null),P=Object(r.useRef)(null),M=Object(r.useState)(!1),_=Object(a.a)(M,2),q=_[0],W=_[1],D=Object(Te.a)("docViewType","carrousel"),U=Object(a.a)(D,2),J=U[0],G=U[1],X=function(e){return i.a.createElement(L.a,{style:{display:"flex",width:"calc(100% - 20px)",minWidth:"250px",alignItems:"center",justifyContent:"space-between",marginTop:"10px",marginLeft:"10px",backgroundColor:"white",borderRadius:"50px"}},i.a.createElement(b.a,{color:"primary",onClick:function(){ee(x-1)}},i.a.createElement(ge.a,null)),i.a.createElement($.j,{name:null,value:x,handleChange:function(e){ee(parseInt(e.target.value))},min:1,max:s,style:{width:"100px",padding:"0px",backgroundColor:"white",marginRight:"10px",borderBottom:"none"}}),i.a.createElement(be.a,{ref:P,defaultValue:0,"aria-label":"Default",valueLabelDisplay:"auto",size:"small",value:x,step:1,marks:!0,min:1,max:s,style:{width:"80%"},onChangeCommitted:function(e,t){ee(t)}}),i.a.createElement(b.a,{color:"primary",onClick:function(){ee(x+1)}},i.a.createElement(ye.a,null)))},K=function(t){"carrousel"===J?Object(fe.j)():"scroll"===J&&(u(s),g(h),Object(fe.c)(s,V.current,h,e.id,x),Object(fe.f)(w),z&&(Object(fe.g)(z),Object(fe.e)(j,x,h,N)),Object(fe.a)()),G(t)};Object(r.useEffect)((function(){return p.e(e.id).then((function(t){u(t.pages),g(t.aspect_ratio),"carrousel"===J&&(Object(fe.c)(t.pages,V.current,t.aspect_ratio,e.id),Object(fe.f)(w),Object(fe.a)())})),function(){"carrousel"===J&&Object(fe.j)()}}),[]);var Q=function(t){"blocks"===e.subView?p.c(e.id,t,e.view.slug,e.subView).then((function(e){O(e.blocks),B(e.labels),W(!0)})):"words"===e.subView?p.c(e.id,t,e.view.slug,e.subView).then((function(e){O(e.words),B(e.labels),W(!0)})):(O([]),q&&"carrousel"===J&&Object(fe.b)(t))};Object(r.useEffect)((function(){null===z?("carrousel"===J&&Object(fe.g)(null),q&&"carrousel"===J&&Object(fe.b)(x),Q(x)):(q&&"carrousel"===J&&Object(fe.b)(x),"carrousel"===J&&Object(fe.g)(z),"carrousel"===J&&Object(fe.e)(j,x,h,N))}),[z]),Object(r.useEffect)((function(){null!==e.subView?(Object(fe.i)(e.subView),Q(x)):O([])}),[e.subView,x]),Object(r.useEffect)((function(){Object(fe.h)(e.view.slug)}),[e.view]),Object(r.useEffect)((function(){j&&j.length>0&&"carrousel"===J&&Object(fe.e)(j,x,h,te)}),[j]);var ee=function(t){t>s&&(t=s),t<1&&(t=1),"carrousel"===J&&Object(fe.d)(t,h,e.id),w(t)},te=function(e,t){var n=Object(Y.a)({},e);n.index=t,N(n),"carrousel"===J&&(Object(fe.b)(x),Object(fe.g)(n),Object(fe.e)(j,x,h,N))};return i.a.createElement(F.a,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")}},i.a.createElement(L.a,{ref:V,style:{position:"absolute",width:"100%",height:"100%"}}),"scroll"===J&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae,{pages:s,aspectRatio:h,page:x,id:e.id,setPage:w,selectedBlock:z,setSelectedBlock:N})),i.a.createElement(I.a,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"}},i.a.createElement(H.a,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})),i.a.createElement(I.a,{id:"processing",initialPosition:{x:0,y:0}},"viz"===e.view&&i.a.createElement("div",{style:{paddingTop:"10px",background:"white",paddingBottom:"10px",paddingRight:"10px"}},i.a.createElement(X,null),i.a.createElement("div",{style:{marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"space-between"}},i.a.createElement(Z.a,{label:"Agregar un recorte",size:"small",onClick:function(){N({index:j.length,bbox:{x:.1,y:.1,width:.1,height:.1},text:"",type:T[0]?T[0]:"default",new:!0}),W(!0)},style:{margin:3,border:"none"},icon:i.a.createElement(Le.a,null),variant:"outlined"}),i.a.createElement(m.a,{disableGutters:!0,variant:"dense"},i.a.createElement(Ve,{size:"small",checked:"carrousel"===J,onChange:function(e){return K(e.target.checked?"carrousel":"scroll")},color:"primary"})))),"lt_extraction"===(null===(t=e.view)||void 0===t?void 0:t.view)&&i.a.createElement("div",{style:{background:"white",paddingBottom:"10px"}},i.a.createElement(Ce,{setSubView:e.setSubView,view:e.view,setSelectedBlock:N}),i.a.createElement(X,null),i.a.createElement("div",{style:{marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"space-between"}},""===e.subView&&null===z&&i.a.createElement(i.a.Fragment,null),"blocks"===e.subView&&null===z&&i.a.createElement(i.a.Fragment,null),"words"===e.subView&&null===z&&i.a.createElement(i.a.Fragment,null),i.a.createElement(m.a,{disableGutters:!0,variant:"dense"},i.a.createElement(Ve,{size:"small",checked:"carrousel"===J,onChange:function(e){return K(e.target.checked?"carrousel":"scroll")},color:"primary"})))),"ner_extraction"===(null===(n=e.view)||void 0===n?void 0:n.view)&&i.a.createElement(Ce,{setSubView:e.setSubView,view:e.view,setSelectedBlock:N,id:e.match.params.id}),"docseg_extraction"===(null===(o=e.view)||void 0===o?void 0:o.view)&&i.a.createElement(Ce,{setSubView:e.setSubView,view:e.view,setSelectedBlock:N,id:e.match.params.id}),z&&i.a.createElement(Pe,{block:z,labels:T,subView:e.subView,setSelectedBlock:N,slug:e.view.slug,recordId:e.id,page:x})))},_e=function(e){var t=Object(r.useState)(0),n=Object(a.a)(t,2),o=(n[0],n[1]),c=Object(r.useState)(0),l=Object(a.a)(c,2),s=(l[0],l[1]),u=Object(r.useState)(1),d=Object(a.a)(u,2),m=(d[0],d[1]),b=Object(r.useRef)(null);Object(r.useRef)(null);Object(r.useEffect)((function(){return p.e(e.id).then((function(t){o(t.pages),s(t.aspect_ratio),Object(fe.c)(t.pages,b.current,t.aspect_ratio,e.id),Object(fe.f)(m),Object(fe.a)()})),function(){Object(fe.j)()}}),[]);return i.a.createElement(F.a,{onDrop:function(e,t){return console.log(e,t)},onDragStart:function(){console.log("start")}},i.a.createElement(L.a,{ref:b,style:{position:"absolute",width:"100%",height:"100%"}}),i.a.createElement(I.a,{id:"metadata",initialPosition:{x:0,y:0},style:{display:e.metadata?"block":"none"}},i.a.createElement(H.a,{resource:e.metadata,setMetadata:e.setMetadata,history:e.history})))},Ie=n(47),Fe=n(1385),He=n(996),qe=n(1029),We=n.n(qe),De=n(1012),Ue=n.n(De),Je=Object(u.a)((function(e){return{bloque:{padding:"10px",backgroundColor:"rgba(255,255,255,.9)",margin:5,width:"100%",height:"100%",overflow:"auto",position:"relative",borderRadius:10,border:"3px solid #fff","&::-webkit-scrollbar":{width:6,height:2},"&::-webkit-scrollbar-button":{width:10,height:10},"&::-webkit-scrollbar-thumb":{background:"#56749a",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-thumb:hover":{background:"#56749a"},"&::-webkit-scrollbar-thumb:active":{background:"#56749a"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",border:"0px none #ffffff",borderRadius:50},"&::-webkit-scrollbar-track:hover":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-track:active":{background:"rgba(0,0,0,0.1)"}},tituloBloque:{top:0,fontSize:15,fontWeight:"bold",padding:"10px 15px",position:"sticky",zIndex:10,width:"100%",left:0,background:"#e6e6e6",borderTopLeftRadius:10,borderTopRightRadius:10,color:"#56749a",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},breadcrumbs:{padding:"5px 15px",color:"#fff",borderBottomLeftRadius:10,borderBottomRightRadius:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},linkBreadcrumb:{color:"#fff",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200,display:"inline-block","&:hover":{color:"#fff"}},selectedBread:{color:"#fff !important",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150,backgroundColor:"rgba(255,255,255,.2)",display:"inline-block",padding:"0 5px",borderRadius:2},columnas:{display:"flex",height:"calc(100vh - 150px)"},separador:{borderBottom:"1px solid #dcdcdc",paddingTop:25,paddingBottom:10,fontWeight:"bold",color:"#56749a","& svg":{marginRight:10,marginLeft:5,width:20,height:20,padding:3,backgroundColor:"#56749a",borderRadius:50,"& path":{fill:"#fff"}}},toolbar:{minHeight:"auto",padding:5,backgroundColor:"#56749a",color:"#fff",borderTopLeftRadius:10,overflow:"hidden",alignItems:"center","& h6":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:16,margin:0}},bookmarkIcon:{"& path":{fill:"#fff"}},itemMenu:{display:"flex",alignItems:"center",padding:15,borderBottom:"1px solid #dcdcdc","& svg":{"& path":{fill:"#9fb0c6"}},"&:hover":{backgroundColor:e.palette.grey[100],cursor:"pointer"},"&.selected":{backgroundColor:"#9fb0c6",color:"#fff","& path":{fill:"#fff"}}}}})),Ge=function(e){var t=Je();return i.a.createElement(d.a,{className:t.bloque,style:e.style},e.title&&i.a.createElement(d.a,{className:t.tituloBloque},e.title),e.topBar&&i.a.createElement(i.a.Fragment,null,e.topBar),e.children)},Ye=function(e){var t=Je(),n=Object(r.useState)("viz"),o=Object(a.a)(n,2),c=o[0],u=o[1],f=Object(r.useState)(null),h=Object(a.a)(f,2),v=h[0],x=h[1],k=Object(r.useState)(null),O=Object(a.a)(k,2),C=O[0],B=O[1],A=Object(r.useState)(0),z=Object(a.a)(A,2),L=z[0],N=z[1],V=Object(r.useState)(0),P=Object(a.a)(V,2),M=P[0],_=P[1],I=Object(r.useState)(null),F=Object(a.a)(I,2),H=F[0],q=F[1],W=Object(r.useState)(!1),D=Object(a.a)(W,2),U=D[0],J=D[1];Object(r.useEffect)((function(){Y()}),[e.match]),Object(r.useEffect)((function(){e.user.favorites&&(e.user.favorites.find((function(t){return t.id===e.match.params.id}))?J(!0):J(!1))}),[e.user.favorites,e.match]),Object(r.useEffect)((function(){if(C){for(var e=Object.keys(C.processing),t=e[0];"fileProcessing"===t&&e.length>1;)e.shift(),t=e[0];"fileProcessing"===t||u({slug:t,view:C.processing[t].type})}}),[C]);var Y=function(){e.match.params.id&&(u("viz"),B(null),p.d(e.match.params.id).then((function(e){B(e)})).catch((function(t){R.a.fire({icon:"error",title:"Oops...",text:"No se pudo obtener el archivo"}).then((function(){e.history.push("/dashboard")}))})))},Z=function(e){_(e)};return i.a.createElement(s.a,null,i.a.createElement(l.a,{userRoles:e.user.roles,list:function(){var t=[];return t.push({name:"Volver atr\xe1s",icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,null)),callback:function(){e.history.goBack()}}),C&&Object.keys(C.processing).map((function(n,a){var r=C.processing[n].type;"av_transcribe"===r&&(e.user.roles.includes("admin")||e.user.roles.includes("editor"))&&t.push({name:"Editar transcripci\xf3n",icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,null),i.a.createElement(w.a,null)),callback:function(){"edit_av_transcribe"===v?(u({view:r,slug:n}),x(null)):(u({view:r,slug:n}),x("edit_av_transcribe"))},action:"edit_av_transcribe"===v?"edit":""})})),t}()}),C&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ge,{style:{width:"calc(100% - 20px)",height:"calc(100vh - 130px)",padding:"2px",background:"rgb(255 255 255 / 34%)",border:"none",backdropFilter:"blur(10px)",display:"flex"}},i.a.createElement(d.a,{style:{width:"400px",height:"100%",background:"white",borderTopLeftRadius:10,borderBottomLeftRadius:10,marginRight:10}},i.a.createElement(m.a,{className:t.toolbar},i.a.createElement(b.a,{sx:{marginRight:"10px"},className:t.bookmarkIcon,size:"large",onClick:function(){var t={type:"records",id:e.match.params.id};U?g.c(t).then((function(t){R.a.fire({icon:"success",title:"Eliminado de favoritos"}),e.requestUser()})).catch((function(e){R.a.fire({icon:"error",title:"Oops...",text:"No se pudo eliminar de favoritos"})})):g.a(t).then((function(t){R.a.fire({icon:"success",title:"Agregado a favoritos"}),e.requestUser()})).catch((function(e){R.a.fire({icon:"error",title:"Oops...",text:"No se pudo agregar a favoritos"})}))}},U?i.a.createElement(Ue.a,null):i.a.createElement(We.a,null)),i.a.createElement("h6",{style:{flexGrow:1}},C.displayName?C.displayName:C.name)),i.a.createElement(d.a,null,i.a.createElement(E.a,{record:C,setMetadata:q}),Object.keys(C.processing).length>1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze,{icon:i.a.createElement(j.a,null),title:"Procesamientos"}),Object.keys(C.processing).map((function(e,t){var n=C.processing[e].type,a=Ie.b.find((function(e){return e.value===n})),r=n;if("audio"!==n&&"video"!==n&&a)return i.a.createElement($e,{key:t,icon:i.a.createElement(T.a,null),name:a.label,onClick:function(){u({view:r,slug:e}),x(null)},className:(null===c||void 0===c?void 0:c.view)===r?"selected":""})}))))),i.a.createElement(d.a,{style:{width:"calc(100% - 400px)",position:"relative"}},"audio"===C.processing.fileProcessing.type&&i.a.createElement(Fe.a,{backend:He.a},i.a.createElement(le,{id:C._id.$oid,setPlayTime:N,time:M,metadata:H,setMetadata:q,history:e.history,subView:v,slug:c.slug},"av_transcribe"===(null===c||void 0===c?void 0:c.view)&&i.a.createElement(G,{id:C._id.$oid,slug:c.slug,subView:v,time:L,setTime:function(e){Z(e)}}))),"video"===C.processing.fileProcessing.type&&i.a.createElement(Fe.a,{backend:He.a},i.a.createElement(ue,{id:C._id.$oid,setPlayTime:N,time:M,metadata:H,setMetadata:q,history:e.history,subView:v,slug:c.slug},"av_transcribe"===(null===c||void 0===c?void 0:c.view)&&i.a.createElement(G,{id:C._id.$oid,slug:c.slug,subView:v,time:L,setTime:function(e){Z(e)}}))),"document"===C.processing.fileProcessing.type&&i.a.createElement(Fe.a,{backend:He.a},i.a.createElement(Me,{id:C._id.$oid,subView:v,setSubView:x,view:c,metadata:H,setMetadata:q,history:e.history})),"image"===C.processing.fileProcessing.type&&i.a.createElement(Fe.a,{backend:He.a},i.a.createElement(_e,{id:C._id.$oid,history:e.history,setMetadata:q,metadata:H}))))))},Ze=function(e){var t=Je();return i.a.createElement(d.a,{className:t.separador},e.icon,e.title)},$e=function(e){var t=Je();return i.a.createElement(d.a,{className:"".concat(t.itemMenu," ").concat(e.className),onClick:e.onClick},e.icon,i.a.createElement("div",{style:{flexGrow:1,marginLeft:15}},e.name),i.a.createElement(h.a,null))};t.default=Object(o.b)((function(e){return{user:e.auth.user}}),c.a)(Ye)},959:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"l",(function(){return f})),n.d(t,"b",(function(){return h}));var a=n(47),r=n(204);function i(e){var t="/records/"+e,n={method:"GET",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function o(e){var t="/records/"+e+"/stream",n={method:"GET",headers:new Headers({Authorization:Object(r.a)()}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.blob()}))}function c(e,t){var n="/records/"+e+"/transcription",i={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({slug:t})};return fetch(a.e+n,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function l(e){var t="/records/"+e+"/document",n={method:"GET",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default"};return fetch(a.e+t,n).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function s(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/records/galleryinfo",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function u(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),c="/records/"+e+"/pages",l={method:"POST",headers:o,mode:"cors",cache:"default",body:JSON.stringify({pages:t,size:n,gallery:!i})};return fetch(a.e+c,l).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function d(e,t,n,i){var o="/records/"+e+"/blocks",c={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify({page:t,block:i,slug:n})};return fetch(a.e+o,c).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function p(e){var t={method:"POST",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/records/setBlock",t).then((function(e){return 201!==e.status?Promise.reject(e):e.json()}))}function m(e){var t={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/records/setBlock",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function b(e){var t={method:"DELETE",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(e)};return fetch(a.e+"/records/setBlock",t).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function f(e,t){var n="/records/"+e+"/edit-transcription",i={method:"PUT",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(a.e+n,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}function h(e,t){var n="/records/"+e+"/edit-transcription",i={method:"DELETE",headers:new Headers({Authorization:Object(r.a)(),"Content-Type":"application/json"}),mode:"cors",cache:"default",body:JSON.stringify(t)};return fetch(a.e+n,i).then((function(e){return 200!==e.status?Promise.reject(e):e.json()}))}},985:function(e,t,n){"use strict";n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return B})),n.d(t,"f",(function(){return z})),n.d(t,"d",(function(){return L})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return M})),n.d(t,"e",(function(){return _})),n.d(t,"a",(function(){return H})),n.d(t,"j",(function(){return q}));var a,r,i,o=n(18),c=n(1036),l=n(1139),s=n(1140),u=n(1141),d=n(959),p=n(968),m=n(1037),b=n.n(m),f=[],h=[],g=[],v=!1,y=0,x=null,w=null,E=null,k=null,j=null,O=p.c(p.d),S=!0;function C(e){j=e}function T(e){e}function B(e){e}function R(e,t,n,a,r){var i=document.querySelector(".tooltip");if(i)i.style.left=t+"px",i.style.top=n+"px",i.style.opacity=1,i.style.backgroundColor=a,i.style.boxShadow="0px 0px 5px 0px "+a,i.innerHTML=e;else{var o=document.createElement("div");o.classList.add("tooltip"),o.style.left=t+"px",o.style.top=n+"px",o.style.opacity=1,o.style.backgroundColor=a,o.style.boxShadow="0px 0px 5px 0px "+a,o.innerHTML=e,document.body.appendChild(o)}}function A(){var e=document.querySelector(".tooltip");e&&e.remove()}function z(e){k=e}function L(e,t,n){var r=a.position.y,i=a.position.z;a.position.set(100*e,r,i),a.rotation.set(0,0,0),y=e,P(e,t,n)}function N(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];S=d,o,w=t,O=p.c(p.d);var m=window.innerWidth/window.innerHeight,b=w.getBoundingClientRect();(a=new c.g(1e3*m/-2,1e3*m/2,500,-500,1,1e3)).position.set(-0,0,200),a.rotation.set(0,0,0),r=new c.k;for(var E=1;E<=e;E++)g.push(!1),T(72,72/n,E,new c.o(1e4*Math.random()-5e3,2e3*Math.random()-1e3,2e3*Math.random()),new c.a(0,0,0));for(var k={line:[]},j=0;j<f.length;j++){var C=new c.f;C.position.x=100*j,C.position.y=0,C.position.z=0,k.line.push(C)}function T(e,t,i,c,s){var u=document.createElement("div");u.style.width=e+"px",u.style.height=t+"px",u.style.backgroundColor="white",u.style.backgroundSize="contain",u.style.backgroundRepeat="no-repeat",u.style.backgroundPosition="center",u.className="plane",u.addEventListener("pointerdown",(function(){if(y===i)v||(v=!0);else{y=i,v=!0;var e=a.position.y,t=a.position.z;a.position.set(100*y,e,t)}P(i,n,o)}));var d=new l.a(u);d.position.copy(c),d.rotation.copy(s),r.add(d),f.push(d),h.push(u)}w.style.height=b.height+"px",(i=new l.b).setSize(b.width,b.height),i.domElement.style.position="absolute",i.domElement.style.top=0,w.appendChild(i.domElement),a.zoom=.45,(x=new s.a(a,i.domElement)).minZoom=.3,x.maxZoom=5,x.zoomSpeed=2,x.enableRotate=!1,x.enablePan=!1,x.enableZoom=!1,x.update(),setTimeout((function(){I(k.line,3)}),350),setTimeout((function(){v=!0,y=u,P(u,n,o)}),1e3),window.addEventListener("resize",F)}function V(e){var t=y-1,n=t-10,a=t+10;n<0&&(n=0,a=20),a>f.length&&(n=f.length-20,a=f.length);for(var r=[],i=n;i<a;i++)!1===g[i]&&r.push(i);d.g(e,r,"small",S).then((function(e){for(var t=0;t<r.length;t++){g[r[t]]=!0;var n=f[r[t]],a="data:image/jpg;base64,"+e[t].data;y!==r[t]+1&&(n.element.style.backgroundColor="transparent"),n.element.style.backgroundImage='url("'+a+'")'}}))}function P(e,t,n){if(k(e),v){E&&clearTimeout(E),E=setTimeout((function(){V(n),function(e){d.g(e,[y-1],"big",S).then((function(e){try{var t=f[y-1],n="data:image/jpg;base64,"+e[0].data;t.element.style.backgroundColor="transparent",t.element.style.backgroundImage='url("'+n+'")'}catch(a){console.log(a)}}))}(n)}),250),x.enablePan=!0,x.enableZoom=!0,x.update();for(var r=0;r<e-1;r++){for(var i=f[r];i.element.firstChild;)i.element.removeChild(i.element.firstChild);i.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",i.element.style.width="72px",i.element.style.height=72/t+"px",i.position.x=100*r-1e3,i.position.y=0,i.position.z=0}for(var o=e;o<f.length;o++){for(var c=f[o];c.element.firstChild;)c.element.removeChild(c.element.firstChild);c.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",c.element.style.width="72px",c.element.style.height=72/t+"px",c.position.x=100*o+1e3,c.position.y=0,c.position.z=0}a.position.set(100*(e-1),0,200);var l=f[e-1];l&&(l.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",l.element.style.width="1440px",l.element.style.height=1440/t+"px",l.position.z=1e3,l.position.y=10,l.position.x=100*(e-1))}else{E&&clearTimeout(E),E=setTimeout((function(){V(n)}),250),x.enablePan=!1,x.enableZoom=!1,x.update();for(var s=0;s<e-1;s++){var u=f[s];u.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",u.element.style.width="72px",u.element.style.height=72/t+"px",u.position.x=100*s,u.position.y=0,u.position.z=0}for(var p=e;p<f.length;p++){var m=f[p];m.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",m.element.style.width="72px",m.element.style.height=72/t+"px",m.position.x=100*p,m.position.y=0,m.position.z=0}a.position.set(100*(e-1),0,200);var b=f[e-1];b.element.style.transition="all 1s cubic-bezier(0.215, 0.610, 0.355, 1)",b.element.style.width="72px",b.element.style.height=72/t+"px",b.position.x=100*(e-1),b.position.z=1e3,b.position.y=10}}function M(e){for(var t=f[e-1];t.element.firstChild;)t.element.removeChild(t.element.firstChild);t.element.classList.remove("dark")}function _(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){};M(t);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");function i(e){return Array.isArray(e.label)?e.label.length>0?"O"===e.label[0]?"transparent":O(e.label[0]):void 0:e.type?O(e.type):"transparent"}function c(e,t,n){var a=e.clientX,r=e.clientY;Array.isArray(t.label)?t.label.length>0&&("O"===t.label[0]?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent")):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(t.label[0],a,r-20,i(t),n.getBoundingClientRect().height))):t.type?(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(t.type,a,r-20,i(t),n.getBoundingClientRect().height)):(n.setAttribute("stroke","black"),n.setAttribute("stroke-width",.05),n.setAttribute("fill","transparent"),R(t.text,a,r-20,O(t.text),n.getBoundingClientRect().height))}function l(e,t,n){a(t,n)}if(r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("viewBox","0 0 100 ".concat(100/n)),r.setAttribute("preserveAspectRatio","none"),null===j)e.forEach((function(e,t){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x",100*e.bbox.x),a.setAttribute("y",100*e.bbox.y/n),a.setAttribute("width",100*e.bbox.width),a.setAttribute("height",100*e.bbox.height/n),a.setAttribute("fill",i(e,a)),a.setAttribute("fill-opacity",.3),a.addEventListener("mousemove",(function(t){c(t,e,a)})),a.addEventListener("mouseout",(function(){a.setAttribute("stroke","transparent"),a.setAttribute("fill",i(e)),A()})),a.addEventListener("mousedown",(function(n){l(0,e,t)})),r.appendChild(a)}));else{A();var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",100*j.bbox.x),s.setAttribute("y",100*j.bbox.y/n),s.setAttribute("width",100*j.bbox.width),s.setAttribute("height",100*j.bbox.height/n),s.setAttribute("fill",i(j,s)),s.setAttribute("fill-opacity",.3),b()(s).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},listeners:{move:function(e){var r=e.target.width.animVal.value,i=e.target.height.animVal.value,c=f[t-1].element.getBoundingClientRect().width,l=i/100*c,s=r/100*c+e.delta.x,u=l+e.delta.y;s=s/c*100,u=u/c*100,e.target.setAttribute("width","".concat(s)),e.target.setAttribute("height","".concat(u));var d={x:parseFloat(e.target.getAttribute("x"))/100,y:parseFloat(e.target.getAttribute("y"))/100*n,width:s/100,height:u/100*n},p=Object(o.a)({},j);p.bbox=d,a(p)}}}).draggable({listeners:{move:function(e){var r=parseFloat(e.target.getAttribute("x")),i=parseFloat(e.target.getAttribute("y")),c=parseFloat(e.target.getAttribute("width")),l=parseFloat(e.target.getAttribute("height")),s=f[t-1].element.getBoundingClientRect().width,u=i/100*s;r=(r=r/100*s+e.delta.x)/s*100,i=(i=u+e.delta.y)/s*100,e.target.setAttribute("x",r),e.target.setAttribute("y",i);var d={x:r/100,y:i/100*n,width:c/100,height:l/100*n},p=Object(o.a)({},j);p.bbox=d,a(p)}}}),r.appendChild(s)}var u=f[t-1];u.element.appendChild(r)}function I(e,t){u.a.removeAll();for(var n=0;n<f.length;n++){var a=f[n],r=e[n];a.position.x=r.position.x,a.position.y=r.position.y,a.position.z=r.position.z,a.element.style.transition="all "+t*Math.random()+"s cubic-bezier(0.215, 0.610, 0.355, 1)"}}function F(){var e=w.getBoundingClientRect(),t=window.innerWidth/window.innerHeight;w.style.height=e.width/t+"px",a.left=-1e3*t/2,a.right=1e3*t/2,a.top=500,a.bottom=-500,a.updateProjectionMatrix(),i.setSize(e.width,e.width/t)}function H(){i&&(requestAnimationFrame(H),a.rotation.set(0,0,0),.5===a.zoom&&a.position.set(100*(y-1),0,200),i.render(r,a))}function q(){r&&i&&r.clear(),window.removeEventListener("resize",F),f=[],g=[],h=[],i=null,r=null,O=p.c(p.d)}}}]);
//# sourceMappingURL=15.db2970ea.chunk.js.map